(()=>{"use strict";var e={input:document.querySelector(".form-group__field"),btnInput:document.querySelector(".form-group__btn"),cardsItems:document.querySelectorAll(".cards__item"),visa:document.querySelector(".visa"),master:document.querySelector(".master"),american:document.querySelector(".americanexp"),discover:document.querySelector(".discover"),jsb:document.querySelector(".jcb"),diners:document.querySelector(".diners"),mir:document.querySelector(".mir"),validateImg:document.querySelector(".validate__result-img"),validateText:document.querySelector(".validate__result-text"),validateContainer:document.querySelector(".validate__result")},t={visa:["4"],master:["51","52","53","54","55"],american:["34","37"],discover:["6011"],jsb:["35"],diners:["30","36","38","39"],mir:["22"]};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyValue=void 0},(r=[{key:"checkPaymentSystem",value:function(){this.numberCard=document.querySelector(".form-group__field");var e=this.numberCard.value.split("",4),r="",n=this;e.forEach((function(e,o){r+=e,Object.keys(t).find((function(e){return t[e].forEach((function(t){t==r&&(n.keyValue=e)}))}))}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var l=function(){return t=function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.numberCard=e.input.value,this.resultLuhn=void 0,this.result=void 0},(r=[{key:"checkCardNumber",value:function(){var e=document.querySelector(".form-group__field").value;this.arrayNamberCard=e.split("");var t=[];this.arrayNamberCard.forEach((function(e,r){var n,o;o=r%2==0?(n=2*e)>9?n-9:n:e,t.push(o)})),this.resultLuhn=t.join(""),this.checkSumResultLuhn()}},{key:"checkSumResultLuhn",value:function(){this.checkArray=this.resultLuhn.split(""),this.checkArray=this.checkArray.map(Number);var e=this.checkArray.reduce((function(e,t){return e+t}));this.result=e%10==0?"validate":"not validate"}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var m=function(){return t=function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.btn=e.btnInput},(r=[{key:"identifyPaymentSystem",value:function(){this.input=document.querySelector(".form-group__field");var t=new i;t.checkPaymentSystem(),void 0!==t.keyValue?(e.cardsItems.forEach((function(e){return e.style.filter="grayscale(1)"})),"mir"==t.keyValue?e.mir.style.filter="grayscale(0)":"visa"==t.keyValue?e.visa.style.filter="grayscale(0)":"master"==t.keyValue?e.master.style.filter="grayscale(0)":"american"==t.keyValue?e.american.style.filter="grayscale(0)":"discover"==t.keyValue?e.discover.style.filter="grayscale(0)":"jsb"==t.keyValue?e.jsb.style.filter="grayscale(0)":"diners"==t.keyValue&&(e.diners.style.filter="grayscale(0)")):e.cardsItems.forEach((function(e){e.style.filter="none"}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();e.input.addEventListener("input",(function(e){(new m).identifyPaymentSystem()})),e.btnInput.addEventListener("click",(function(t){var r=new l;r.checkCardNumber(),e.validateContainer.style.display="flex","validate"==r.result?(e.validateImg.style.backgroundPosition="left",e.validateText.textContent="validate"):(e.validateImg.style.backgroundPosition="right",e.validateText.textContent="not validate")}))})();